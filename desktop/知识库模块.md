  ✅ 完成的功能模块

  📁 1. TypeScript 类型定义 (types/knowledge.ts)

  - ✅ KnowledgeBaseResponse - 知识库数据结构
  - ✅ CreateKnowledgeBaseRequest / UpdateKnowledgeBaseRequest - 创建和更新请求
  - ✅ KnowledgeScope - 知识库作用域枚举（PUBLIC/PRIVATE）
  - ✅ Document - 文档数据结构
  - ✅ DocumentStatus - 文档状态枚举（已上传→OCR处理中→知识图谱构建中→完成/失败）
  - ✅ EntityTypeTemplateResponse - 实体类型模板
  - ✅ EntityType - 实体类型定义（包含颜色、描述）

  🔌 2. API 客户端 (lib/api/)

  knowledgeApi.ts
  - ✅ listByTenant() - 管理员获取租户所有知识库
  - ✅ listByOwner(ownerUserId) - 普通用户获取自己的知识库
  - ✅ get(kbId) - 获取知识库详情
  - ✅ create() / update() / delete() - 知识库 CRUD

  documentApi.ts
  - ✅ listByKbId(kbId) - 获取知识库下的文档列表
  - ✅ get(documentId) - 获取文档详情
  - ✅ upload() - 上传文档（支持 FormData，可选实体模板）
  - ✅ delete(documentId) - 删除文档

  entityTemplateApi.ts
  - ✅ list() - 获取用户自定义模板
  - ✅ listSystem() - 获取系统预置模板
  - ✅ get(templateId) - 获取模板详情（含实体类型列表）
  - ✅ create() / update() / delete() - 模板 CRUD

  🎨 3. 页面组件

  知识库列表页面 (app/knowledge-base/page.tsx)
  - ✅ 根据用户角色调用不同接口（管理员/普通用户）
  - ✅ 表格展示知识库列表（名称、描述、作用域、所有者、创建时间）
  - ✅ 创建知识库对话框（名称、描述、作用域选择）
  - ✅ 编辑知识库对话框
  - ✅ 删除确认对话框
  - ✅ 空状态、加载状态、错误状态
  - ✅ 点击"查看"按钮跳转到知识库详情页

  知识库详情页面 (app/knowledge-base/[kbId]/page.tsx)
  - ✅ 显示知识库基本信息（返回按钮、名称、描述）
  - ✅ 文档列表表格（文件名、大小、状态、进度条、上传时间）
  - ✅ 文档状态徽章（6种状态：已上传/OCR处理中/OCR完成/处理中/已完成/失败）
  - ✅ 文档处理进度条（0-100%）
  - ✅ 上传文档对话框
    - 文件选择（仅支持 PDF）
    - 实体类型模板选择（可选，显示系统+自定义模板）
  - ✅ 删除文档确认
  - ✅ 空状态、加载状态
  - ✅ 上传后自动刷新文档列表

  实体类型模板管理页面 (app/entity-templates/page.tsx)
  - ✅ 模板列表表格（名称、描述、实体数量、类型）
  - ✅ 系统模板/自定义模板徽章
  - ✅ 实体类型颜色预览（圆形色点）
  - ✅ 创建模板对话框
    - 模板名称、描述
    - 动态添加/删除实体类型
    - 每个实体：名称、颜色选择器、描述
  - ✅ 查看模板详情对话框（显示所有实体类型列表）
  - ✅ 删除自定义模板（系统模板不可删除）
  - ✅ 空状态、加载状态

  🧭  4. 导航更新 (components/layout/sidebar.tsx)

  - ✅ 移除"文档管理"入口
  - ✅ 添加"实体模板"导航项（Layers 图标）
  - ✅ 更新导航描述文案

  🎯 核心特性

  权限控制

  // 管理员：查看租户所有知识库
  if (isAdmin()) {
    response = await knowledgeApi.listByTenant();
  } else {
    // 普通用户：只看自己的知识库
    response = await knowledgeApi.listByOwner(user!.username);
  }

  文档状态追踪

  文档上传后会经历以下状态流转：
  1. UPLOADED - 文件已上传到 SFTP
  2. OCR_PROCESSING - OCR 处理中（RabbitMQ 异步任务）
  3. OCR_COMPLETED - OCR 完成
  4. PROCESSING - 知识图谱构建中
  5. COMPLETED - 全部完成
  6. FAILED - 处理失败

  前端会实时显示进度条和状态徽章，用户可清楚了解文档处理进度。

  实体类型模板

  - 系统预置模板 + 用户自定义模板
  - 每个实体包含：名称、颜色、描述
  - 上传文档时可选择模板，系统将按模板进行知识抽取
  - 颜色用于前端图谱可视化展示